<%=

  name = @p
  begin
    value = @resource.send(@p)
  rescue NoMethodError
    value = ''
  end

  html =''

  if ["TrueClass", "FalseClass"].include? value.class.name
    checked = value == true ? 'checked="checked"' : ''
    html += '<input name="resource['+name.to_s+']" type="checkbox" '+checked+' />'

  elsif name =~ /_id$/
    relation_name = name.to_s.gsub(/_id$/, '')

    if @resource.model.relation_keys_include? relation_name

      model = Object.const_get relation_name.split('_').map(&:capitalize).join
      html += render_relationship_in_select model, name, value
    else
      return
    end
  else
    html += '<input class="string" type="text" name="resource['+name.to_s+']" value="'+value.to_s+'" />'
  end
  html

 %>
